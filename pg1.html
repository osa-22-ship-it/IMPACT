<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IMPACT - TYPOGRAPHY BASICS</title>
  <link rel="stylesheet" href="fweb.css">
</head>
<body>
  <div class="min-h-screen bg-background">
    <!-- Hero Section -->
    <header class="relative overflow-hidden border-b-4 border-primary">
      <div class="absolute inset-0 scanline opacity-20 pointer-events-none"></div>
      <div class="relative z-10 max-w-7xl mx-auto px-8 py-20">
        <div class="flex items-center gap-4 mb-4">
          <svg class="w-12 h-12 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="6" y1="11" x2="10" y2="11"></line>
            <line x1="8" y1="9" x2="8" y2="13"></line>
            <line x1="15" y1="12" x2="15.01" y2="12"></line>
            <line x1="18" y1="10" x2="18.01" y2="10"></line>
            <path d="M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z"></path>
          </svg>
          <div class="h-12 w-1 bg-primary"></div>
          <span class="text-muted-foreground uppercase tracking-wider">Type Specimen</span>
        </div>
        <h1 class="text-10xl font-black mb-6 text-foreground leading-tight">
          IM<span class="text-primary">PACT</span>
        </h1>
        <p class="text-xl text-muted-foreground max-w-2xl leading-relaxed">
           MEME-CODED/GAME-READY/THE INTERNET'S FAVORITE SHOUTING FONT
        </p>
      </div>
    </header>

    <!-- Navigation -->
    <nav class="bg-foreground border-b-2 border-primary sticky top-0 z-50">
      <div class="max-w-7xl mx-auto px-8">
        <div class="flex gap-2 py-4">
          <a href="pg1.html" class="nav-link active px-6 py-3 text-primary-foreground font-bold uppercase tracking-wide transition-colors">
            01 / Typography Basics
          </a>
          <a href="pg2.html" class="nav-link px-6 py-3 text-muted font-bold uppercase tracking-wide transition-colors">
            02 / UI & Dialog
          </a>
          <a href="pg3.html" class="nav-link px-6 py-3 text-muted font-bold uppercase tracking-wide transition-colors">
            03 / Character Set
          </a>
        </div>
      </div>
    </nav>

    <!-- Impact Font Information -->
    <section class="max-w-7xl mx-auto px-8 py-16 bg-card-50">
      <div class="mb-12">
        <h2 class="text-primary mb-2">ABOUT</h2>
        <p class="text-muted-foreground">The legendary typeface powering bold hadlines and lasting impressions.</p>
      </div>

      <div class="grid md-grid-cols-2 gap-8">
        <!-- History Card -->
        <div class="p-8 rounded-lg border-2 bg-card border-border">
          <div class="mb-6">
            <p class="text-xs text-muted-foreground uppercase tracking-wider mb-1">Designer</p>
             <p class="text-xl text-foreground font-black">GEOFFREY LEE</p>
          </div>
          <div class="space-y-4">
            <div>
              <p class="text-xs text-muted-foreground uppercase tracking-wider mb-1">Year Released</p>
              <p class="text-xl text-foreground font-black">1965</p>
            </div>
            <div>
              <p class="text-xs text-muted-foreground uppercase tracking-wider mb-1">Intended Use</p>
              <p class="text-xl text-foreground font-black">DISPLAY/HEADER</p>
            </div>
            <div>
              <p class="text-xs text-muted-foreground uppercase tracking-wider mb-1">Type Foundry</p>
              <p class="text-xl text-foreground font-black">STEPHENSON BLAKE</p>
            </div>
            <div>
              <p class="text-xs text-muted-foreground uppercase tracking-wider mb-1">Classification</p>
              <p class="text-xl text-primary font-black">SANS-SERIF</p>
            </div>
          </div>
        </div>

        <!-- Characteristics Card -->
        <div class="p-8 rounded-lg border-2 bg-card border-border">
          <div class="mb-6">
            <h3 class="mb-2 text-foreground">Key Characteristics</h3>
            <p class="text-muted-foreground">What makes Impact perfect for media</p>
          </div>
          <div class="space-y-4">
            <div class="p-4 border-l-4 border-primary bg-primary-5">
              <p class="font-bold text-primary mb-1">High X-Height</p>
              <p class="text-sm text-foreground">Best used at large sizes, Impact offers exceptional readability for Design Interfaces, UGC, UI, HUD elements.</p>
            </div>
            <div class="p-4 border-l-4 border-foreground bg-muted">
              <p class="font-bold text-foreground mb-1">Bold Stroke</p>
              <p class="text-sm text-muted-foreground">Maximum visual impact and clarity against complex gaming backgrounds, posters and headlines.</p>
            </div>
            <div class="p-4 border-l-4 border-secondary bg-secondary-5">
              <p class="font-bold text-secondary mb-1">Small Counters</p>
              <p class="text-sm text-foreground">Condensed letterforms create density and power across all types of display.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Usage Note -->
      <div class="mt-8 p-6 bg-foreground text-background rounded-lg border-2 border-primary">
        <div class="flex items-start gap-4">
          <svg class="w-6 h-6 text-primary flex-shrink-0 mt-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="16" x2="12" y2="12"></line>
            <line x1="12" y1="8" x2="12.01" y2="8"></line>
          </svg>
          <div>
            <p class="font-bold mb-2">Why Impact Dominates Gaming Typography</p>
            <p class="text-base leading-relaxed opacity-90">
              Originally designed for attention-grabbing headlines in advertising, Impact found its true calling in video game interfaces. Its compressed width allows maximum information density, while its heavyweight presence ensures critical game data remains visible during fast-paced action. The typeface's ability to maintain clarity at both large display sizes and small UI scales makes it indispensable for modern gaming design.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Stats Section -->
   <section class="max-w-7xl mx-auto px-8 pt-48 pb-16">

    <!-- Stats Section -->
   <div class="grid grid-cols-2 gap-6 mb-12 max-w-2xl mx-auto">
  <div class="tile-box bg-primary border-8 border-foreground rounded-lg aspect-square" data-tile="0"></div>
  <div class="tile-box bg-primary border-8 border-foreground rounded-lg aspect-square" data-tile="1"></div>
  <div class="tile-box bg-primary border-8 border-foreground rounded-lg aspect-square" data-tile="2"></div>
  <div class="tile-box bg-primary border-8 border-foreground rounded-lg aspect-square" data-tile="3"></div>
</div>



      <div class="mb-12 mt-16">
        <h2 class="text-primary mb-2">Typography in Action</h2>
        <p class="text-muted-foreground">Real-world gaming applications</p>
      </div>
      
      <div class="grid grid-cols-1 md-grid-cols-2 lg-grid-cols-4 gap-4">
        <!-- Stat Card 1 -->
        <div class="stat-card relative bg-card border-2 border-primary p-6 pixel-corners overflow-hidden group">
          <div class="absolute inset-0 scanline pointer-events-none opacity-30"></div>
          <div class="relative z-10">
            <div class="mb-2 text-primary group-hover-text-primary-foreground">
              <svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
                <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
                <path d="M4 22h16"></path>
                <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
                <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
                <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
              </svg>
            </div>
            <div class="text-muted-foreground group-hover-text-primary-foreground-80 mb-1 stat-label">
              HIGH SCORE
            </div>
            <div class="group-hover-text-primary-foreground stat-value" id="score-value">
              9,999
            </div>
          </div>
        </div>

       <!-- Stat Card 2 -->
        <div class="stat-card relative bg-card border-2 border-primary p-6 pixel-corners overflow-hidden group">
          <div class="absolute inset-0 scanline pointer-events-none opacity-30"></div>
          <div class="relative z-10">
            <div class="mb-2 text-primary group-hover-text-primary-foreground">
              <svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <circle cx="12" cy="12" r="6"></circle>
                <circle cx="12" cy="12" r="2"></circle>
              </svg>
            </div>
            <div class="text-muted-foreground group-hover-text-primary-foreground-80 mb-1 stat-label">
              LEVEL
            </div>
            <div class="group-hover-text-primary-foreground stat-value">
              999
            </div>
          </div>
        </div>

         <!-- Stat Card 3 -->
        <div class="stat-card relative bg-card border-2 border-primary p-6 pixel-corners overflow-hidden group">
          <div class="absolute inset-0 scanline pointer-events-none opacity-30"></div>
          <div class="relative z-10">
            <div class="mb-2 text-primary group-hover-text-primary-foreground">
              <svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
              </svg>
            </div>
            <div class="text-muted-foreground group-hover-text-primary-foreground-80 mb-1 stat-label">
              COMBO
            </div>
            <div class="group-hover-text-primary-foreground stat-value">
              ×256
            </div>
          </div>
        </div>

        <!-- Stat Card 4 -->
        <div class="stat-card relative bg-card border-2 border-primary p-6 pixel-corners overflow-hidden group">
          <div class="absolute inset-0 scanline pointer-events-none opacity-30"></div>
          <div class="relative z-10">
            <div class="mb-2 text-primary group-hover-text-primary-foreground">
              <svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="14.5 17.5 3 6 3 3 6 3 17.5 14.5"></polyline>
                <line x1="13" y1="19" x2="19" y2="13"></line>
                <line x1="16" y1="16" x2="20" y2="20"></line>
                <line x1="19" y1="21" x2="21" y2="19"></line>
                <polyline points="14.5 6.5 18 3 21 3 21 6 17.5 9.5"></polyline>
                <line x1="5" y1="14" x2="9" y2="18"></line>
                <line x1="7" y1="17" x2="4" y2="20"></line>
                <line x1="3" y1="19" x2="5" y2="21"></line>
              </svg>
            </div>
            <div class="text-muted-foreground group-hover-text-primary-foreground-80 mb-1 stat-label">
              POWER
            </div>
            <div class="group-hover-text-primary-foreground stat-value">
              MAX
            </div>
          </div>
        </div>
      </div>
    </section>


    <!-- Display Typography -->
    <section class="max-w-7xl mx-auto px-8 py-16 bg-card-50">
      <div class="mb-12">
        <h2 class="text-primary mb-2">Display Typography</h2>
        <p class="text-muted-foreground">Large headlines and titles for maximum impact</p>
      </div>

      <div class="space-y-8">
        <div class="p-8 rounded-lg border-2 bg-card border-border">
          <div class="mb-6">
            <h3 class="mb-2 text-foreground">Extra Large Display</h3>
            <p class="text-muted-foreground">Perfect for hero sections and dramatic reveals</p>
          </div>
          <div class="space-y-4">
            <p class="text-8xl font-black text-foreground">LEVEL UP</p>
            <p class="text-8xl font-black text-primary">CRITICAL HIT!</p>
            <p class="text-8xl font-black">
              <span class="text-foreground">BOSS</span>
              <span class="text-primary"> BATTLE</span>
            </p>
          </div>
        </div>

        <div class="p-8 rounded-lg border-2 bg-card border-border">
          <div class="mb-6">
            <h3 class="mb-2 text-foreground">Large Display</h3>
            <p class="text-muted-foreground">Main headings and section titles</p>
          </div>
          <div class="space-y-3">
            <p class="text-6xl font-black text-foreground">ACHIEVEMENT UNLOCKED</p>
            <p class="text-6xl font-black text-primary">VICTORY ROYALE</p>
            <p class="text-6xl font-bold text-secondary">GAME PAUSED</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Body Typography -->
    <section class="max-w-7xl mx-auto px-8 py-16">
      <div class="mb-12">
        <h2 class="text-primary mb-2">Body Typography</h2>
        <p class="text-muted-foreground">Readable text for descriptions and content</p>
      </div>

      <div class="grid md-grid-cols-2 gap-8">
        <div class="p-8 rounded-lg border-2 bg-card border-border">
          <div class="mb-6">
            <h3 class="mb-2 text-foreground">Large Body</h3>
            <p class="text-muted-foreground">Featured content and introductions</p>
          </div>
          <p class="text-2xl text-foreground leading-relaxed">
            In the neon-lit streets of Neo Tokyo, players must navigate through hordes of digital enemies while collecting power-ups and defeating bosses to save the virtual world.
          </p>
        </div>

        <div class="p-8 rounded-lg border-2 bg-card border-border">
          <div class="mb-6">
            <h3 class="mb-2 text-foreground">Medium Body</h3>
            <p class="text-muted-foreground">Standard paragraph text</p>
          </div>
          <div>
            <p class="text-xl text-foreground leading-relaxed mb-4">
              Master the art of pixel-perfect combat as you journey through procedurally generated dungeons filled with treasure and danger.
            </p>
            <p class="text-xl text-muted-foreground leading-relaxed">
              Every decision counts in this roguelike adventure where permadeath keeps the stakes high and the gameplay intense.
            </p>
          </div>
        </div>

        <div class="p-8 rounded-lg border-2 bg-card border-border">
          <div class="mb-6">
            <h3 class="mb-2 text-foreground">Small Body</h3>
            <p class="text-muted-foreground">Secondary information and details</p>
          </div>
          <div>
            <p class="text-base text-foreground mb-3">
              Choose your character class wisely. Each class offers unique abilities and playstyles that dramatically affect your approach to combat and exploration.
            </p>
            <p class="text-sm text-muted-foreground">
              Advanced techniques: combo chains, perfect dodges, and environmental takedowns all contribute to your final score multiplier.
            </p>
          </div>
        </div>

        <div class="p-8 rounded-lg border-2 bg-card border-border">
          <div class="mb-6">
            <h3 class="mb-2 text-foreground">Micro Copy</h3>
            <p class="text-muted-foreground">Labels and minimal UI text</p>
          </div>
          <div class="space-y-4">
            <div>
              <p class="text-xs text-muted-foreground uppercase tracking-wider mb-1">Status</p>
              <p class="text-base text-foreground font-medium">Active Mission</p>
            </div>
            <div>
              <p class="text-xs text-muted-foreground uppercase tracking-wider mb-1">Difficulty</p>
              <p class="text-base text-primary font-medium">Nightmare Mode</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="border-t-2 border-border mt-16">
      <div class="max-w-7xl mx-auto px-8 py-12">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-3">
            <svg class="w-6 h-6 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="6" y1="11" x2="10" y2="11"></line>
              <line x1="8" y1="9" x2="8" y2="13"></line>
              <line x1="15" y1="12" x2="15.01" y2="12"></line>
              <line x1="18" y1="10" x2="18.01" y2="10"></line>
              <path d="M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z"></path>
            </svg>
            <span class="text-sm text-muted-foreground">IMPACT</span>
          </div>
          <div class="text-sm text-muted-foreground">
            Press <span class="px-2 py-1 bg-muted text-foreground font-mono">RETURN</span> to continue
          </div>
        </div>
      </div>
    </footer>
  </div>

<script>// Initialize the score value
let score = 9999;

// Tile text content
const tileTexts = [
  'A FONT THAT STAYS RELEVANT, USING BOLD FORMS AND NEW CONCEPTS TO GRAB ATTENTION ACROSS MODERN MEDIA.',
  'IMPACT THRIVES AND ADAPTS DIGITALLY ACROSS TIME, BRINGING BOLD, ATTENTION-GRABBING ENERGY THROUGHOUT THE AGES.',
  'IMPACT`S THICK STROKES AND TIGHT SPACING MAKE EXTENDED TEXT VISUALLY FATIGUING.',
  'ACROSS MANY MEDIUMS, THIS FONT`S UTILITY SHINES WHERE CLARITY AND PRESENCE MATTER.'
];

// Update score display on page load
document.addEventListener('DOMContentLoaded', function() {
  console.log('DOM loaded');

  // === ADD CENTERED ICON IMAGES TO THE 4 RED TILE BOXES ===
const tileImages = [
  'https://i.postimg.cc/15ds8XrW/Group-1.png',
  'https://i.postimg.cc/3JqYkNFn/Group-2.png',
  'https://i.postimg.cc/YqPMv0zx/Group-3.png',
  'https://i.postimg.cc/28tr1y70/Group-4.png'
];

const tiles = document.querySelectorAll('.tile-box');

tiles.forEach((tile, index) => {
  if (!tileImages[index]) return;

  const img = document.createElement('img');
  img.src = tileImages[index];
  img.alt = '';
  img.style.width = '60%';
  img.style.height = '60%';
  img.style.objectFit = 'contain';
  img.style.pointerEvents = 'none';
  img.style.transition = 'opacity 0.5s ease';
  img.classList.add('tile-image');

  // Scale down only 1st & 2nd images
  if (index === 0 ) {
    img.style.transform = 'scale(0.85)';
  }

  // Create text element
  const textElement = document.createElement('div');
  textElement.className = 'tile-text';
  textElement.textContent = tileTexts[index];
  textElement.style.opacity = '0';

  tile.style.display = 'flex';
  tile.style.alignItems = 'center';
  tile.style.justifyContent = 'center';
  tile.style.transition = 'background-color 0.5s ease';
  tile.style.position = 'relative';

  tile.appendChild(img);
  tile.appendChild(textElement);

  // Track tile state
  let isToggled = false;

  // Add click handler to tile
  tile.addEventListener('click', function() {
    if (!isToggled) {
      // First click: fade image, change bg, show text
      img.style.opacity = '0';
      tile.style.backgroundColor = '#1F2937';
      setTimeout(() => {
        textElement.style.opacity = '1';
      }, 250);
      isToggled = true;
    } else {
      // Second click: revert to original state
      textElement.style.opacity = '0';
      setTimeout(() => {
        img.style.opacity = '1';
        tile.style.backgroundColor = '#DC2626';
      }, 250);
      isToggled = false;
    }
  });
});

  const scoreElement = document.getElementById('score-value');
  if (scoreElement) {
    scoreElement.textContent = score.toLocaleString();
  }

  // Add click event to high score stat card (first stat card)
  const highScoreCard = document.querySelector('.stat-card');
  console.log('High score card found:', highScoreCard);
  if (highScoreCard) {
    highScoreCard.addEventListener('click', function() {
      console.log('High score card clicked!');
      showHighScorePopup();
    });
    highScoreCard.style.cursor = 'pointer';
  }

  // Add click event to level stat card (second stat card)
  const levelCard = document.querySelectorAll('.stat-card')[1];
  console.log('Level card found:', levelCard);
  if (levelCard) {
    levelCard.addEventListener('click', function() {
      console.log('Level card clicked!');
      showLevelPopup();
    });
    levelCard.style.cursor = 'pointer';
  }

  // Add click event to combo stat card (third stat card)
  const comboCard = document.querySelectorAll('.stat-card')[2];
  console.log('Combo card found:', comboCard);
  if (comboCard) {
    comboCard.addEventListener('click', function() {
      console.log('Combo card clicked!');
      showComboPopup();
    });
    comboCard.style.cursor = 'pointer';
  }

  // Add click event to power stat card (fourth stat card)
  const powerCard = document.querySelectorAll('.stat-card')[3];
  console.log('Power card found:', powerCard);
  if (powerCard) {
    powerCard.addEventListener('click', function() {
      console.log('Power card clicked!');
      showPowerPopup();
    });
    powerCard.style.cursor = 'pointer';
  }
});

// Show High Score Popup with count-up animation and synced coin sound
function showHighScorePopup() {
  console.log('showHighScorePopup called');
  
  const audioContext = new (window.AudioContext || window.webkitAudioContext)();
  let soundInterval;
  
  // Function to play one coin sound
  function playOneCoin() {
    const currentTime = audioContext.currentTime;
    
    // Create two oscillators for a metallic "ding" sound
    const oscillator1 = audioContext.createOscillator();
    const oscillator2 = audioContext.createOscillator();
    const gainNode = audioContext.createGain();
    
    oscillator1.type = 'sine';
    oscillator1.frequency.setValueAtTime(1000, currentTime);
    
    oscillator2.type = 'sine';
    oscillator2.frequency.setValueAtTime(1500, currentTime);
    
    // Quick attack, medium decay
    gainNode.gain.setValueAtTime(0, currentTime);
    gainNode.gain.linearRampToValueAtTime(0.25, currentTime + 0.01);
    gainNode.gain.exponentialRampToValueAtTime(0.01, currentTime + 0.2);
    
    oscillator1.connect(gainNode);
    oscillator2.connect(gainNode);
    gainNode.connect(audioContext.destination);
    
    oscillator1.start(currentTime);
    oscillator2.start(currentTime);
    oscillator1.stop(currentTime + 0.2);
    oscillator2.stop(currentTime + 0.2);
  }
  
  // Create modal overlay
  const modal = document.createElement('div');
  modal.className = 'modal-overlay';
  modal.innerHTML = `
    <div class="modal-content stat-card-popup">
      <div class="absolute inset-0 scanline pointer-events-none opacity-30"></div>
      <div class="relative z-10">
        <div class="mb-2 text-primary-foreground" id="popup-trophy" style="opacity: 0;">
          <svg class="w-12 h-12 mx-auto" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
            <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
            <path d="M4 22h16"></path>
            <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
            <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
            <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
          </svg>
        </div>
        <div class="text-muted-foreground mb-2 popup-label">
          HIGH SCORE
        </div>
        <div class="popup-value" id="popup-score-value">
          650
        </div>
      </div>
    </div>
  `;

  document.body.appendChild(modal);
  console.log('Modal added to body');

  // Animate count-up
  let currentScore = 650;
  const targetScore = 9999;
  const duration = 2000; // 2 seconds
  const increment = (targetScore - currentScore) / (duration / 16); // 60fps
  const trophy = document.getElementById('popup-trophy');

  // Play coin sound every 80ms while counting
  soundInterval = setInterval(() => {
    if (currentScore < targetScore) {
      playOneCoin();
    } else {
      clearInterval(soundInterval);
    }
  }, 80);

  const counter = setInterval(() => {
    currentScore += increment;
    if (currentScore >= targetScore) {
      currentScore = targetScore;
      clearInterval(counter);
      clearInterval(soundInterval); // Stop sound when counter reaches target
    }
    
    // Update score
    document.getElementById('popup-score-value').textContent = Math.floor(currentScore).toLocaleString();
    
    // Fade in trophy as score increases
    const progress = (currentScore - 650) / (targetScore - 650);
    trophy.style.opacity = progress;
    trophy.style.transition = 'opacity 0.1s ease-out';
  }, 16);

  // Close modal on click
  modal.addEventListener('click', function(e) {
    if (e.target === modal) {
      clearInterval(counter);
      clearInterval(soundInterval);
      audioContext.close();
      modal.remove();
    }
  });

  // Close on Escape key
  const escapeHandler = function(e) {
    if (e.key === 'Escape') {
      clearInterval(counter);
      clearInterval(soundInterval);
      audioContext.close();
      modal.remove();
      document.removeEventListener('keydown', escapeHandler);
    }
  };
  document.addEventListener('keydown', escapeHandler);
}

// Show Level Popup with count-up animation and trumpet fanfare sound
function showLevelPopup() {
  console.log('showLevelPopup called');
  
  const audioContext = new (window.AudioContext || window.webkitAudioContext)();
  
  // Trumpet fanfare sound
  function playTrumpetFanfare() {
    const currentTime = audioContext.currentTime;
    
    // Create multiple oscillators for a rich trumpet fanfare
    const osc1 = audioContext.createOscillator();
    const osc2 = audioContext.createOscillator();
    const osc3 = audioContext.createOscillator();
    const gainNode = audioContext.createGain();
    
    // Use sawtooth for brassy sound
    osc1.type = 'sawtooth';
    osc2.type = 'sawtooth';
    osc3.type = 'sawtooth';
    
    // Triumphant fanfare pattern: G4 - G4 - G4 - C5 (hold)
    // First note (G4)
    osc1.frequency.setValueAtTime(392, currentTime);
    osc2.frequency.setValueAtTime(392 * 1.5, currentTime); // Fifth harmony
    osc3.frequency.setValueAtTime(392 * 2, currentTime); // Octave
    
    // Second note (G4) - short
    osc1.frequency.setValueAtTime(392, currentTime + 0.25);
    osc2.frequency.setValueAtTime(392 * 1.5, currentTime + 0.25);
    osc3.frequency.setValueAtTime(392 * 2, currentTime + 0.25);
    
    // Third note (G4) - short
    osc1.frequency.setValueAtTime(392, currentTime + 0.5);
    osc2.frequency.setValueAtTime(392 * 1.5, currentTime + 0.5);
    osc3.frequency.setValueAtTime(392 * 2, currentTime + 0.5);
    
    // Final triumphant note (C5) - hold
    osc1.frequency.setValueAtTime(523, currentTime + 0.75);
    osc2.frequency.setValueAtTime(523 * 1.5, currentTime + 0.75);
    osc3.frequency.setValueAtTime(523 * 2, currentTime + 0.75);
    
    // Envelope - bold and triumphant
    gainNode.gain.setValueAtTime(0, currentTime);
    gainNode.gain.linearRampToValueAtTime(0.3, currentTime + 0.05);
    gainNode.gain.setValueAtTime(0.3, currentTime + 0.75);
    gainNode.gain.linearRampToValueAtTime(0.25, currentTime + 1.2);
    gainNode.gain.exponentialRampToValueAtTime(0.01, currentTime + 1.6);
    
    osc1.connect(gainNode);
    osc2.connect(gainNode);
    osc3.connect(gainNode);
    gainNode.connect(audioContext.destination);
    
    osc1.start(currentTime);
    osc2.start(currentTime);
    osc3.start(currentTime);
    osc1.stop(currentTime + 1.6);
    osc2.stop(currentTime + 1.6);
    osc3.stop(currentTime + 1.6);
  }
  
  // Create modal overlay
  const modal = document.createElement('div');
  modal.className = 'modal-overlay';
  modal.innerHTML = `
    <div class="modal-content stat-card-popup">
      <div class="absolute inset-0 scanline pointer-events-none opacity-30"></div>
      <div class="relative z-10">
        <div class="mb-4 text-primary-foreground flex justify-center" id="popup-level-icon-wrapper">
          <svg id="popup-level-icon" class="mx-auto" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 120px; height: 120px; transition: all 1.5s ease-out;">
            <circle cx="12" cy="12" r="10"></circle>
            <circle cx="12" cy="12" r="6"></circle>
            <circle cx="12" cy="12" r="2"></circle>
            <!-- Sun rays positioned outside the outer circle -->
            <line class="sun-ray" x1="12" y1="1.5" x2="12" y2="0" opacity="0" stroke-linecap="round"></line>
            <line class="sun-ray" x1="19.42" y1="4.58" x2="20.48" y2="3.52" opacity="0" stroke-linecap="round"></line>
            <line class="sun-ray" x1="22.5" y1="12" x2="24" y2="12" opacity="0" stroke-linecap="round"></line>
            <line class="sun-ray" x1="19.42" y1="19.42" x2="20.48" y2="20.48" opacity="0" stroke-linecap="round"></line>
            <line class="sun-ray" x1="12" y1="22.5" x2="12" y2="24" opacity="0" stroke-linecap="round"></line>
            <line class="sun-ray" x1="4.58" y1="19.42" x2="3.52" y2="20.48" opacity="0" stroke-linecap="round"></line>
            <line class="sun-ray" x1="1.5" y1="12" x2="0" y2="12" opacity="0" stroke-linecap="round"></line>
            <line class="sun-ray" x1="4.58" y1="4.58" x2="3.52" y2="3.52" opacity="0" stroke-linecap="round"></line>
          </svg>
        </div>
        <div class="text-muted-foreground mb-2 popup-label">
          LEVEL
        </div>
        <div class="popup-value" id="popup-level-value" style="opacity: 0;">
          99
        </div>
      </div>
    </div>
  `;

  document.body.appendChild(modal);
  console.log('Modal added to body');

  const levelIcon = document.getElementById('popup-level-icon');
  const levelValue = document.getElementById('popup-level-value');
  const sunRays = modal.querySelectorAll('.sun-ray');

  // Play trumpet fanfare sound
  playTrumpetFanfare();

  // Start shrinking icon after a brief delay
  setTimeout(() => {
    levelIcon.style.width = '48px';
    levelIcon.style.height = '48px';
    
    // Start showing level value and counting
    setTimeout(() => {
      levelValue.style.opacity = '1';
      levelValue.style.transition = 'opacity 0.3s ease-in';
      
      // Fast count-up animation
      let currentLevel = 100;
      const targetLevel = 999;
      const duration = 800; // Fast - 0.8 seconds
      const increment = (targetLevel - currentLevel) / (duration / 16); // 60fps

      const counter = setInterval(() => {
        currentLevel += increment;
        if (currentLevel >= targetLevel) {
          currentLevel = targetLevel;
          clearInterval(counter);
          
          // Fade in sun rays AFTER counting completes
          setTimeout(() => {
            sunRays.forEach(ray => {
              ray.setAttribute('opacity', '1');
            });
          }, 100);
        }
        
        levelValue.textContent = Math.floor(currentLevel);
      }, 16);

      // Store counter for cleanup
      modal.setAttribute('data-counter-id', counter);
    }, 200);
  }, 100);

  // Close modal on click
  modal.addEventListener('click', function(e) {
    if (e.target === modal) {
      const counterId = modal.getAttribute('data-counter-id');
      if (counterId) clearInterval(parseInt(counterId));
      audioContext.close();
      modal.remove();
    }
  });

  // Close on Escape key
  const escapeHandler = function(e) {
    if (e.key === 'Escape') {
      const counterId = modal.getAttribute('data-counter-id');
      if (counterId) clearInterval(parseInt(counterId));
      audioContext.close();
      modal.remove();
      document.removeEventListener('keydown', escapeHandler);
    }
  };
  document.addEventListener('keydown', escapeHandler);
}

// Show Combo Popup with flashing icon, multiplying text, and rapid zap sounds
function showComboPopup() {
  console.log('showComboPopup called');
  
  const audioContext = new (window.AudioContext || window.webkitAudioContext)();
  let zapInterval;
  
  // Function to play rapid electric zap sound
  function playZapSound() {
    const currentTime = audioContext.currentTime;
    
    // Create oscillators for electric zap
    const osc1 = audioContext.createOscillator();
    const osc2 = audioContext.createOscillator();
    const gainNode = audioContext.createGain();
    
    osc1.type = 'square';
    osc2.type = 'sawtooth';
    
    // Rapid frequency sweep for electric effect
    osc1.frequency.setValueAtTime(1500, currentTime);
    osc1.frequency.exponentialRampToValueAtTime(800, currentTime + 0.05);
    
    osc2.frequency.setValueAtTime(2000, currentTime);
    osc2.frequency.exponentialRampToValueAtTime(1000, currentTime + 0.05);
    
    // Sharp attack and quick decay
    gainNode.gain.setValueAtTime(0, currentTime);
    gainNode.gain.linearRampToValueAtTime(0.15, currentTime + 0.005);
    gainNode.gain.exponentialRampToValueAtTime(0.01, currentTime + 0.05);
    
    osc1.connect(gainNode);
    osc2.connect(gainNode);
    gainNode.connect(audioContext.destination);
    
    osc1.start(currentTime);
    osc2.start(currentTime);
    osc1.stop(currentTime + 0.05);
    osc2.stop(currentTime + 0.05);
  }
  
  // Create modal overlay
  const modal = document.createElement('div');
  modal.className = 'modal-overlay';
  modal.innerHTML = `
    <div class="modal-content stat-card-popup">
      <div class="absolute inset-0 scanline pointer-events-none opacity-30"></div>
      <div id="combo-text-container" style="position: absolute; inset: 0; overflow: hidden; pointer-events: none;"></div>
      <div class="relative z-10">
        <div class="mb-2 text-primary-foreground" id="popup-lightning">
          <svg class="w-12 h-12 mx-auto" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
          </svg>
        </div>
        <div class="text-muted-foreground mb-2 popup-label" id="popup-combo-label">
          COMBO
        </div>
        <div class="popup-value" id="popup-combo-value">
          ×20
        </div>
      </div>
    </div>
  `;

  document.body.appendChild(modal);
  console.log('Modal added to body');

  const lightning = document.getElementById('popup-lightning');
  const comboLabel = document.getElementById('popup-combo-label');
  const comboValue = document.getElementById('popup-combo-value');
  const comboContainer = document.getElementById('combo-text-container');

  // Animate count-up
  let currentCombo = 20;
  const targetCombo = 256;
  const duration = 2500; // 2.5 seconds
  const increment = (targetCombo - currentCombo) / (duration / 16); // 60fps
  let isAnimating = true;

  // Play zap sound every 150ms during animation
  zapInterval = setInterval(() => {
    if (isAnimating) {
      playZapSound();
    } else {
      clearInterval(zapInterval);
    }
  }, 150);

  const counter = setInterval(() => {
    currentCombo += increment;
    if (currentCombo >= targetCombo) {
      currentCombo = targetCombo;
      clearInterval(counter);
      isAnimating = false;
      clearInterval(zapInterval);
    }
    
    // Update combo value
    comboValue.textContent = '×' + Math.floor(currentCombo);
  }, 16);

  // Flash lightning icon AND combo label together
  let flashState = true;
  const flashInterval = setInterval(() => {
    if (!isAnimating) {
      clearInterval(flashInterval);
      lightning.style.opacity = '1';
      comboLabel.style.opacity = '1';
      return;
    }
    flashState = !flashState;
    lightning.style.opacity = flashState ? '1' : '0.2';
    comboLabel.style.opacity = flashState ? '1' : '0.2';
  }, 100);

  // Spawn COMBO text randomly
  const spawnInterval = setInterval(() => {
    if (!isAnimating) {
      clearInterval(spawnInterval);
      return;
    }

    const comboText = document.createElement('div');
    comboText.textContent = 'COMBO';
    comboText.style.position = 'absolute';
    const padding = 15; // % safe zone from edges
     

comboText.style.left = Math.random() * (100 - padding * 2) + padding + '%';
comboText.style.top = Math.random() * (100 - padding * 2) + padding + '%';
comboText.style.transform = 'translate(-50%, -50%)';

    comboText.style.fontWeight = '900';
    comboText.style.color = 'rgba(255, 255, 255, ' + (Math.random() * 0.25 + 0.25) + ')';
    comboText.style.opacity = '1';
    comboText.style.transition = 'opacity 0.6s ease-out';
    comboText.style.pointerEvents = 'none';
    
    comboContainer.appendChild(comboText);

// Fade in
requestAnimationFrame(() => {
  comboText.style.opacity = (Math.random() * 0.25 + 0.25);
});

// Fade out
setTimeout(() => {
  comboText.style.opacity = '0';
}, 700);


    // Fade out
    setTimeout(() => {
      comboText.style.opacity = '0';
      setTimeout(() => comboText.remove(), 600);
    }, 50);
  }, 150);

  // Close modal on click
  modal.addEventListener('click', function(e) {
    if (e.target === modal) {
      clearInterval(counter);
      clearInterval(flashInterval);
      clearInterval(spawnInterval);
      clearInterval(zapInterval);
      audioContext.close();
      modal.remove();
    }
  });

  // Close on Escape key
  const escapeHandler = function(e) {
    if (e.key === 'Escape') {
      clearInterval(counter);
      clearInterval(flashInterval);
      clearInterval(spawnInterval);
      clearInterval(zapInterval);
      audioContext.close();
      modal.remove();
      document.removeEventListener('keydown', escapeHandler);
    }
  };
  document.addEventListener('keydown', escapeHandler);
}

// Show Power Popup with enlarging and shaking icon/text and power-up sound
function showPowerPopup() {
  console.log('showPowerPopup called');
  
  const audioContext = new (window.AudioContext || window.webkitAudioContext)();
  
  // Power-up sound that builds and crescendos
  function playPowerUpSound() {
    const currentTime = audioContext.currentTime;
    
    // Create multiple oscillators for rich power-up sound
    const osc1 = audioContext.createOscillator();
    const osc2 = audioContext.createOscillator();
    const osc3 = audioContext.createOscillator();
    const gainNode = audioContext.createGain();
    
    osc1.type = 'sawtooth';
    osc2.type = 'square';
    osc3.type = 'sine';
    
    // Rising frequency sweep
    osc1.frequency.setValueAtTime(100, currentTime);
    osc1.frequency.exponentialRampToValueAtTime(800, currentTime + 1.0);
    
    osc2.frequency.setValueAtTime(150, currentTime);
    osc2.frequency.exponentialRampToValueAtTime(1200, currentTime + 1.0);
    
    osc3.frequency.setValueAtTime(200, currentTime);
    osc3.frequency.exponentialRampToValueAtTime(1600, currentTime + 1.0);
    
    // Building envelope
    gainNode.gain.setValueAtTime(0, currentTime);
    gainNode.gain.linearRampToValueAtTime(0.25, currentTime + 0.8);
    gainNode.gain.exponentialRampToValueAtTime(0.01, currentTime + 1.2);
    
    osc1.connect(gainNode);
    osc2.connect(gainNode);
    osc3.connect(gainNode);
    gainNode.connect(audioContext.destination);
    
    osc1.start(currentTime);
    osc2.start(currentTime);
    osc3.start(currentTime);
    osc1.stop(currentTime + 1.2);
    osc2.stop(currentTime + 1.2);
    osc3.stop(currentTime + 1.2);
  }
  
  // Create modal overlay
  const modal = document.createElement('div');
  modal.className = 'modal-overlay';
  modal.innerHTML = `
    <div class="modal-content stat-card-popup">
      <div class="absolute inset-0 scanline pointer-events-none opacity-30"></div>
      <div class="relative z-10">
        <div class="mb-2 text-primary-foreground" id="popup-sword-wrapper">
          <svg id="popup-sword" class="w-12 h-12 mx-auto" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transition: all 0.5s ease-out;">
            <polyline points="14.5 17.5 3 6 3 3 6 3 17.5 14.5"></polyline>
            <line x1="13" y1="19" x2="19" y2="13"></line>
            <line x1="16" y1="16" x2="20" y2="20"></line>
            <line x1="19" y1="21" x2="21" y2="19"></line>
            <polyline points="14.5 6.5 18 3 21 3 21 6 17.5 9.5"></polyline>
            <line x1="5" y1="14" x2="9" y2="18"></line>
            <line x1="7" y1="17" x2="4" y2="20"></line>
            <line x1="3" y1="19" x2="5" y2="21"></line>
          </svg>
        </div>
        <div class="text-muted-foreground mb-2 popup-label">
          POWER
        </div>
        <div class="popup-value" id="popup-power-value" style="transition: all 0.5s ease-out;">
          MAX
        </div>
      </div>
    </div>
  `;

  document.body.appendChild(modal);
  console.log('Modal added to body');

  const sword = document.getElementById('popup-sword');
  const powerValue = document.getElementById('popup-power-value');

  // Play power-up sound
  playPowerUpSound();

  // Keep sword at original size (no change needed)
  sword.style.width = '48px';
  sword.style.height = '48px';

  // Enlarge MAX text and shake at the same time
  let shakeInterval;
  setTimeout(() => {
    powerValue.style.transition = 'all 0.3s ease-out'; // grows slower
    powerValue.style.fontSize = '6rem';

    // Start powerful shake immediately
    let shakeCount = 0;
    shakeInterval = setInterval(() => {
      const randomX = (Math.random() - 0.5) * 30; // horizontal shake
      const randomY = (Math.random() - 0.5) * 30; // vertical shake
      const randomRotate = (Math.random() - 0.5) * 15; // rotation

      powerValue.style.transform = `translate(${randomX}px, ${randomY}px) rotate(${randomRotate}deg)`;

      shakeCount++;
      if (shakeCount > 60) { // ~1 second
        clearInterval(shakeInterval);
        powerValue.style.transform = 'none';
      }
    }, 16);
  }, 100);

  // Close modal on click
  modal.addEventListener('click', function(e) {
    if (e.target === modal) {
      if (shakeInterval) clearInterval(shakeInterval);
      audioContext.close();
      modal.remove();
    }
  });

  // Close on Escape key
  const escapeHandler = function(e) {
    if (e.key === 'Escape') {
      if (shakeInterval) clearInterval(shakeInterval);
      audioContext.close();
      modal.remove();
      document.removeEventListener('keydown', escapeHandler);
    }
  };
  document.addEventListener('keydown', escapeHandler);
}

const pages = [
  'pg1.html',
  'pg2.html',
  'pg3.html'
];

// Get current page index
let currentIndex = pages.indexOf(window.location.pathname.split("/").pop());

// Track direction: 1 = forward, -1 = backward
let direction = 1;

document.addEventListener('keydown', (event) => {
    if (event.key === 'Enter') {  // Return key
        // Move to next page in the current direction
        currentIndex += direction;

        // Reverse direction if we hit the ends
        if (currentIndex >= pages.length) {
            currentIndex = pages.length - 2; // Step back
            direction = -1;
        } else if (currentIndex < 0) {
            currentIndex = 1; // Step forward
            direction = 1;
        }

        window.location.href = pages[currentIndex];
    }
});
</script>
</body>
</html>
